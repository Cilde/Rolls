title: Rolls Setup
properties:
  mode: "run-once"
  save_state: "always"


actions:
  pre:

  - run: /usr/share/firstboot/set-theme.sh


screens:
  first-screen:
    source: yafti.screen.title
    values:
      title: "Welcome to Rolls Kyoto!"
      icon: "/path/to/icon"
      description: |
        Welcome to Rolls Kyoto! The sweetest distro around! Let's get you started by picking some applications!
 
  can-we-modify-your-flatpaks:
    source: yafti.screen.consent
    values:
      title: Welcome traveler
      condition:
        run: flatpak remotes --system | grep fedora

      description: |
        This tool modifies your flatpaks and flatpak sources as well as do some theme related tasks. 
        If you do not want to do this exit the installer.
        For new users just do it (tm)
      actions:
        - run: flatpak remote-delete fedora --force
        - run: flatpak remove --system --noninteractive --all
        - run: mkdir "${HOME}/.config/gtk-4.0"
        - run: ln -sf /usr/share/themes/Lavanda-Sea-Light/gtk-4.0/gtk.css "${HOME}/.config/gtk-4.0/gtk.css"
        - run: ln -sf /usr/share/themes/Lavanda-Sea-light/gtk-4.0/assets  "${HOME}/.config/gtk-4.0/assets"
        - run: ln -sf /usr/share/themes/Lavanda-Sea-Light/gtk-4.0/gtk-dark.css  "${HOME}/.config/gtk-4.0/gtk-dark.css"

  applications:
    source: yafti.screen.package
    values:
      title: Package Installation
      show_terminal: true
      package_manager: yafti.plugin.flatpak
      package_manager_defaults:
        user: false
        system: true
      groups:
        Core:
          description: Core Applications.
          default: true
          packages:
          - Calculator: org.gnome.Calculator
          - Clapper: com.github.rafostar.Clapper
          - Flatseal Permissions Manager: com.github.tchx84.Flatseal
        Office:
          description: Office applications and art.
          default: false
          packages:
          - Libreoffice: org.libreoffice.LibreOffice
          - OnlyOffice:  org.onlyoffice.desktopeditors
        Communication:
          default: false
          description: Communication and collaboration tools.
          packages:
          - Discord: com.discordapp.Discord
          - Slack: com.slack.Slack
          - Thunderbird: org.mozilla.Thunderbird
        Browsers:
          description: Install a browser! (We recommend Floorp!)
          default: false
          packages:
          - Floorp (Recommended!): one.ablaze.floorp
          - Firefox: com.mozilla.Firefox
          - Brave: com.brave.Browser
          - Google Chrome: com.google.Chrome
          - Microsoft Edge: com.microsoft.Edge
          - Opera: com.opera.Opera
          - Vivaldi: com.vivaldi.Vivaldi
        Miscellaneous:
          default: false
          description: Additional apps you may find useful.
          packages:
          - Krita: org.kde.krita
          - Kdenlive: org.kde.kdenlive
          - Image Organiser: org.gnome.shotwell

  final-screen:
    source: yafti.screen.title
    values:
      title: "Congratulations!"
      icon: "/path/to/icon"
      description: |
        If you installed applications, please log out and log back in for them to show up! Please report bugs on the GitHub page and we will fix them as soon as possible!

